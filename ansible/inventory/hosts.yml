---
# VMStation Cluster Inventory
# This file defines all nodes in the cluster
#
# Structure:
#   - all: Contains global variables
#   - masters: Control plane nodes
#   - workers: Worker nodes
#   - storage: Storage nodes (optional)
#
# Usage:
#   ansible-playbook -i inventory/hosts.yml playbooks/initial-setup.yml

all:
  vars:
    # Cluster identification
    cluster_name: vmstation-cluster
    cluster_domain: vmstation.local
    
    # SSH settings
    ansible_ssh_private_key_file: "~/.ssh/vmstation_cluster"
    ansible_ssh_common_args: '-o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null'
    
    # Python interpreter
    ansible_python_interpreter: /usr/bin/python3
    
    # Timezone
    timezone: UTC
    
    # Power management settings
    autosleep_enabled: true
    autosleep_timeout_minutes: 120
    autosleep_check_interval_minutes: 5
    wol_enabled: true
    
    # Kubernetes settings
    k8s_version: "1.28.0"
    container_runtime: containerd
    pod_network_cidr: "10.244.0.0/16"
    service_cidr: "10.96.0.0/12"

  children:
    # Control plane nodes
    masters:
      hosts:
        vmstation-master-01:
          ansible_host: 192.168.1.10
          node_labels:
            node-role.kubernetes.io/control-plane: ""
          
    # Worker nodes
    workers:
      hosts:
        vmstation-worker-01:
          ansible_host: 192.168.1.11
          node_labels:
            node.kubernetes.io/workload: "general"
        vmstation-worker-02:
          ansible_host: 192.168.1.12
          node_labels:
            node.kubernetes.io/workload: "general"
        vmstation-worker-03:
          ansible_host: 192.168.1.13
          node_labels:
            node.kubernetes.io/workload: "high-memory"

    # Optional: Storage nodes
    storage:
      hosts:
        vmstation-storage-01:
          ansible_host: 192.168.1.20
          storage_disks:
            - /dev/sdb
            - /dev/sdc

    # Node groups for power management
    # Nodes that should never auto-sleep
    always_on:
      hosts:
        vmstation-master-01:

    # Nodes that can auto-sleep
    sleepable:
      hosts:
        vmstation-worker-01:
        vmstation-worker-02:
        vmstation-worker-03:
        vmstation-storage-01:
